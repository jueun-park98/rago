{
  "openapi" : "3.0.0",
  "info" : {
    "title" : "Callback Example",
    "version" : "1.0.0"
  },
  "paths" : {
    "/streams" : {
      "post" : {
        "description" : "subscribes a client to receive out-of-band data",
        "parameters" : [ {
          "description" : "the location where data will be sent.  Must be network accessible\nby the source server\n",
          "required" : true,
          "schema" : {
            "example" : "https://tonys-server.com",
            "format" : "uri",
            "type" : "string"
          },
          "in" : "query",
          "name" : "callbackUrl"
        } ],
        "responses" : {
          "201" : {
            "description" : "subscription successfully created",
            "content" : {
              "application/json" : {
                "schema" : {
                  "description" : "subscription information",
                  "properties" : {
                    "subscriptionId" : {
                      "description" : "this unique identifier allows management of the subscription",
                      "example" : "2531329f-fb09-4ef7-887e-84e648214436",
                      "type" : "string"
                    }
                  },
                  "required" : [ "subscriptionId" ]
                }
              }
            }
          }
        },
        "callbacks" : {
          "onData" : {
            "{$request.query.callbackUrl}/data" : {
              "post" : {
                "requestBody" : {
                  "description" : "subscription payload",
                  "content" : {
                    "application/json" : {
                      "schema" : {
                        "properties" : {
                          "timestamp" : {
                            "format" : "date-time",
                            "type" : "string"
                          },
                          "userData" : {
                            "type" : "string"
                          }
                        },
                        "type" : "object"
                      }
                    }
                  }
                },
                "responses" : {
                  "202" : {
                    "description" : "Your server implementation should return this HTTP status code\nif the data was received successfully\n"
                  },
                  "204" : {
                    "description" : "Your server should return this HTTP status code if no longer interested\nin further updates\n"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}